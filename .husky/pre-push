# Get list of files changed in current branch that are not pushed yet
CHANGED_FILES=$(git diff --name-only origin/$(git rev-parse --abbrev-ref HEAD))

# Check if any staged file is under the web/ folder
if echo "$CHANGED_FILES" | grep -q "^web/"; then
  echo "Detected changes in /web. Running tests & build..."
  pnpm --filter web test
  pnpm --filter web build
else
  echo "No changes in /web. Skipping web lint/test."
fi
